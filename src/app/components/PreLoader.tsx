"use client";
import React, { useEffect, useRef } from "react";
import { gsap } from "gsap";

const Preloader: React.FC = () => {
  const preloaderRef = useRef<HTMLDivElement>(null);
  const logoRef = useRef<HTMLDivElement>(null);
  const logoCircleRef = useRef<SVGCircleElement>(null); 
  const overlayRef = useRef<HTMLDivElement>(null); 

  useEffect(() => {
   
    const originalOverflow = document.body.style.overflow;
    document.body.style.overflow = "hidden";

    const tl = gsap.timeline({
      onComplete: () => {
        if (preloaderRef.current) {
          preloaderRef.current.style.display = "none";
        }
        document.body.style.overflow = originalOverflow;
      },
    });

    tl.fromTo(
      logoRef.current,
      { y: "10vh", opacity: 0 },
      {
        y: "0",
        opacity: 1,
        duration: 1.5,
        ease: "power3.out",
      }
    );

    tl.fromTo(
      logoCircleRef.current,
      {
        scale: 0.5,
        opacity: 0,
      },
      {
        scale: 1.5,
        opacity: 1,
        duration: 0.6,
        repeat: -1,
        yoyo: true,
        ease: "power1.inOut",
      },
      "-=1.5"
    );

    tl.to(
      overlayRef.current,
      {
        width: "100%", 
        duration: 1.5,
        opacity: 0.1,
        ease: "power2.inOut",
      },
      "+=0.5"
    );

    tl.to(
      preloaderRef.current,
      {
        opacity: 0,
        duration: 1,
        delay: 1,
        onComplete: () => {
          if (preloaderRef.current) {
            preloaderRef.current.style.display = "none";
          }
          document.body.style.overflow = originalOverflow;
        },
      },
      "+=0.5"
    );

    return () => {
      tl.kill();
      gsap.killTweensOf(logoRef.current);
      gsap.killTweensOf(logoCircleRef.current);
      gsap.killTweensOf(overlayRef.current);
      document.body.style.overflow = originalOverflow;
    };
  }, []);

  return (
    <div
      ref={preloaderRef}
      className="fixed top-0 left-0 w-screen h-screen bg-[#060B27] flex items-center justify-center z-50 overflow-hidden"
    >
      {/* Half-Screen Gradient Overlay */}
      <div
        ref={overlayRef}
        className="fixed top-0 left-0 h-full w-0 bg-gradient-to-tr from-[#32CAFD26] via-[#060B27]/80 to-[#060B27]"
      />

      {/* Logo Container */}
      <div ref={logoRef} className="relative">
        <svg
          width="148"
          height="38"
          viewBox="0 0 148 38"
          fill="none"
          xmlns="http://www.w3.org/2000/svg"
        >
          {/* Purple Circle */}
          <circle
            ref={logoCircleRef}
            cx="29.38"
            cy="7.98"
            r="7"
            fill="#7214FF"
          />
          {/* Rest of SVG paths (keep the paths as per provided SVG) */}
          <path
            d="M31.1874 17.1468V22.4431C31.1874 24.7897 31.1858 26.4498 31.078 27.7467C30.9718 29.0237 30.7706 29.8018 30.4525 30.4119C29.8336 31.6005 28.8622 32.57 27.6703 33.1874C27.0587 33.5047 26.2787 33.7055 24.9987 33.8114C23.6986 33.9189 22.0345 33.9206 19.6824 33.9206H14.7839C12.4317 33.9206 10.7677 33.9189 9.46778 33.8114C8.18745 33.7055 7.40774 33.5047 6.796 33.1874C5.60432 32.57 4.63267 31.6005 4.01363 30.4119C3.69586 29.8018 3.49465 29.0237 3.38829 27.7467C3.28037 26.4498 3.27901 24.7897 3.27901 22.4431V17.5565C3.27901 15.21 3.28037 13.55 3.38829 12.2532C3.49465 10.976 3.69586 10.1981 4.01363 9.58787C4.63267 8.39907 5.60432 7.42976 6.796 6.81221C7.40774 6.4952 8.18745 6.29448 9.46778 6.18841C10.7677 6.08071 12.4316 6.0794 14.7839 6.0794H20.0931C20.1405 4.93284 20.37 3.83313 20.7532 2.80829H14.711C12.4481 2.80825 10.648 2.80825 9.1964 2.9285C7.70965 3.05166 6.44223 3.30942 5.28446 3.90939C3.49387 4.83728 2.03393 6.29374 1.1038 8.08001C0.502386 9.23496 0.244 10.4993 0.120545 11.9825C7.08486e-07 13.4306 0 15.2263 0 17.4838V22.5158C0 24.7733 7.08486e-07 26.5692 0.120545 28.0174C0.244 29.5005 0.502386 30.7648 1.1038 31.9199C2.03393 33.7059 3.49387 35.1624 5.28446 36.0905C6.44223 36.6904 7.70965 36.948 9.1964 37.0715C10.648 37.1917 12.448 37.1917 14.7109 37.1917H19.7553C22.0181 37.1917 23.8183 37.1917 25.27 37.0715C26.7567 36.948 28.024 36.6904 29.1819 36.0905C30.9722 35.1624 32.4322 33.7059 33.3626 31.9199C33.9639 30.7648 34.2221 29.5005 34.3459 28.0174C34.4664 26.5692 34.4664 24.7733 34.4664 22.5162V16.4882C33.4389 16.8706 32.3367 17.0995 31.1874 17.1468Z"
            fill="white"
          />
          <path d="M31.1874 17.1468V22.4431C31.1874 24.7897 31.1858 26.4498 31.078 27.7467C30.9718 29.0237 30.7706 29.8018 30.4525 30.4119C29.8336 31.6005 28.8622 32.57 27.6703 33.1874C27.0587 33.5047 26.2787 33.7055 24.9987 33.8114C23.6986 33.9189 22.0345 33.9206 19.6824 33.9206H14.7839C12.4317 33.9206 10.7677 33.9189 9.46778 33.8114C8.18745 33.7055 7.40774 33.5047 6.796 33.1874C5.60432 32.57 4.63267 31.6005 4.01363 30.4119C3.69586 29.8018 3.49465 29.0237 3.38829 27.7467C3.28037 26.4498 3.27901 24.7897 3.27901 22.4431V17.5565C3.27901 15.21 3.28037 13.55 3.38829 12.2532C3.49465 10.976 3.69586 10.1981 4.01363 9.58787C4.63267 8.39907 5.60432 7.42976 6.796 6.81221C7.40774 6.4952 8.18745 6.29448 9.46778 6.18841C10.7677 6.08071 12.4316 6.0794 14.7839 6.0794H20.0931C20.1405 4.93284 20.37 3.83313 20.7532 2.80829H14.711C12.4481 2.80825 10.648 2.80825 9.1964 2.9285C7.70965 3.05166 6.44223 3.30942 5.28446 3.90939C3.49387 4.83728 2.03393 6.29374 1.1038 8.08001C0.502386 9.23496 0.244 10.4993 0.120545 11.9825C7.08486e-07 13.4306 0 15.2263 0 17.4838V22.5158C0 24.7733 7.08486e-07 26.5692 0.120545 28.0174C0.244 29.5005 0.502386 30.7648 1.1038 31.9199C2.03393 33.7059 3.49387 35.1624 5.28446 36.0905C6.44223 36.6904 7.70965 36.948 9.1964 37.0715C10.648 37.1917 12.448 37.1917 14.7109 37.1917H19.7553C22.0181 37.1917 23.8183 37.1917 25.27 37.0715C26.7567 36.948 28.024 36.6904 29.1819 36.0905C30.9722 35.1624 32.4322 33.7059 33.3626 31.9199C33.9639 30.7648 34.2221 29.5005 34.3459 28.0174C34.4664 26.5692 34.4664 24.7733 34.4664 22.5162V16.4882C33.4389 16.8706 32.3367 17.0995 31.1874 17.1468Z" fill="white" />
          <path d="M58.1911 17.1083C58.1911 18.1125 57.9485 19.0539 57.4632 19.9328C56.9959 20.8116 56.25 21.5197 55.2253 22.0578C54.2186 22.5955 52.9423 22.8646 51.3962 22.8646H48.2414V30.0737H44.4664V11.2981H51.3962C52.8525 11.2981 54.0928 11.5492 55.1175 12.0513C56.1418 12.5534 56.9058 13.2438 57.4091 14.1225C57.9305 15.0012 58.1911 15.9964 58.1911 17.1083ZM51.2343 19.8251C52.277 19.8251 53.0501 19.592 53.5534 19.1257C54.0567 18.6415 54.3084 17.969 54.3084 17.1083C54.3084 15.2791 53.2837 14.3646 51.2343 14.3646H48.2414V19.8251H51.2343Z" fill="white" />
          <path d="M63.9661 17.4849C64.4514 16.6958 65.0806 16.0772 65.8536 15.6288C66.6443 15.1805 67.5431 14.9564 68.5498 14.9564V18.9105H67.5521C66.366 18.9105 65.4671 19.1885 64.856 19.7444C64.2625 20.3005 63.9661 21.2687 63.9661 22.6495V30.0737H60.1912V15.1716H63.9661V17.4849Z" fill="white" />
          <path d="M78.1264 30.0737C76.6885 30.0737 75.3941 29.7597 74.2436 29.132C73.0931 28.4864 72.1856 27.5811 71.5204 26.4154C70.8732 25.2496 70.5498 23.9048 70.5498 22.3805C70.5498 20.8561 70.8822 19.5113 71.5474 18.3457C72.2303 17.18 73.1562 16.2834 74.3248 15.6558C75.4929 15.0102 76.7963 14.6874 78.2346 14.6874C79.6724 14.6874 80.9758 15.0102 82.1444 15.6558C83.3125 16.2834 84.2294 17.18 84.8947 18.3457C85.5775 19.5113 85.9194 20.8561 85.9194 22.3805C85.9194 23.9048 85.5685 25.2496 84.8676 26.4154C84.1844 27.5811 83.2498 28.4864 82.0632 29.132C80.8947 29.7597 79.5827 30.0737 78.1264 30.0737ZM78.1264 26.792C78.8096 26.792 79.4478 26.6305 80.0409 26.3078C80.652 25.9672 81.1377 25.4651 81.4972 24.8015C81.8567 24.1379 82.0362 23.3311 82.0362 22.3805C82.0362 20.9637 81.6587 19.8789 80.9037 19.1257C80.1667 18.3546 79.2589 17.9691 78.1805 17.9691C77.1021 17.9691 76.1942 18.3546 75.4573 19.1257C74.7379 19.8789 74.3785 20.9637 74.3785 22.3805C74.3785 23.7973 74.7289 24.891 75.4302 25.6622C76.1491 26.4154 77.048 26.792 78.1264 26.792Z" fill="white" />
          <path d="M87.9193 22.3269C87.9193 20.8205 88.2157 19.4844 88.8092 18.3188C89.4203 17.1531 90.247 16.2565 91.2897 15.6288C92.3325 15.0012 93.4916 14.6874 94.7679 14.6874C95.7389 14.6874 96.6644 14.9026 97.5453 15.333C98.4261 15.7454 99.1274 16.3013 99.6483 17.0007V9.92627H103.477V29.8316H99.6483V27.6257C99.1811 28.3609 98.5249 28.9529 97.6801 29.4011C96.8354 29.8496 95.8558 30.0737 94.7409 30.0737C93.4826 30.0737 92.3325 29.7507 91.2897 29.1054C90.247 28.4598 89.4203 27.5541 88.8092 26.3884C88.2157 25.2051 87.9193 23.8508 87.9193 22.3269ZM99.6754 22.3805C99.6754 21.4658 99.4959 20.686 99.1364 20.0404C98.7765 19.3768 98.2912 18.8747 97.6801 18.534C97.069 18.1753 96.4128 17.996 95.7119 17.996C95.0106 17.996 94.3634 18.1663 93.7703 18.507C93.1772 18.8478 92.6919 19.3499 92.3144 20.0134C91.955 20.659 91.775 21.4302 91.775 22.3269C91.775 23.2232 91.955 24.0123 92.3144 24.6939C92.6919 25.3572 93.1772 25.8683 93.7703 26.2269C94.3814 26.5859 95.0286 26.765 95.7119 26.765C96.4128 26.765 97.069 26.5949 97.6801 26.2539C98.2912 25.8953 98.7765 25.3931 99.1364 24.7475C99.4959 24.0843 99.6754 23.2951 99.6754 22.3805Z" fill="white" />
          <path d="M119.714 14.9835V29.8856H115.912V28.0027C115.427 28.6483 114.789 29.1594 113.998 29.536C113.225 29.8946 112.38 30.0737 111.463 30.0737C110.295 30.0737 109.261 29.8316 108.363 29.3475C107.464 28.8454 106.754 28.1192 106.232 27.1686C105.729 26.2003 105.477 25.0526 105.477 23.7257V14.9835H109.252V23.1876C109.252 24.3713 109.549 25.2856 110.142 25.9313C110.735 26.5589 111.544 26.8729 112.569 26.8729C113.611 26.8729 114.43 26.5589 115.023 25.9313C115.616 25.2856 115.912 24.3713 115.912 23.1876V14.9835H119.714Z" fill="white" />
          <path d="M121.714 22.3805C121.714 20.8381 122.029 19.4933 122.658 18.3457C123.288 17.18 124.159 16.2834 125.274 15.6558C126.388 15.0102 127.665 14.6874 129.102 14.6874C130.954 14.6874 132.482 15.1536 133.687 16.0861C134.909 17.0007 135.727 18.2919 136.14 19.9594H132.069C131.853 19.314 131.484 18.8119 130.963 18.4532C130.46 18.0767 129.831 17.8884 129.076 17.8884C127.997 17.8884 127.143 18.2829 126.514 19.0719C125.885 19.8429 125.57 20.9461 125.57 22.3805C125.57 23.7973 125.885 24.9 126.514 25.6892C127.143 26.4604 127.997 26.8459 129.076 26.8459C130.603 26.8459 131.601 26.1643 132.069 24.8015H136.14C135.727 26.4154 134.909 27.6977 133.687 28.6479C132.464 29.5986 130.936 30.0737 129.102 30.0737C127.665 30.0737 126.388 29.7597 125.274 29.132C124.159 28.4864 123.288 27.5901 122.658 26.4424C122.029 25.2766 121.714 23.9228 121.714 22.3805Z" fill="white" />
          <path d="M143.721 18.2649V25.4737C143.721 25.9758 143.838 26.3434 144.072 26.5769C144.324 26.792 144.737 26.8995 145.313 26.8995H147.065V30.0737H144.692C141.511 30.0737 139.919 28.5314 139.919 25.4471V18.2649H138.14V15.1715H139.919V11.4864H143.721V15.1715H147.065V18.2649H143.721Z" fill="white" />
          <path d="M22 7.97658C22 3.91177 25.3032 0.616577 29.3778 0.616577C33.4524 0.616577 36.7556 3.91177 36.7556 7.97658C36.7556 12.0414 33.4524 15.3366 29.3778 15.3366C25.3032 15.3366 22 12.0414 22 7.97658Z" fill="#7214FF" />
          {/* Continue including other paths for the complete SVG logo */}
        </svg>
      </div>
    </div>
  );
};

export default Preloader;